---
description: PRD 质量审计 - 支持全面/逻辑/结构分析
---

请对 PRD 文档进行质量审计。

**参数解析：**
- 第一个参数 `$1`：审计模式或文件路径
- 第二个参数 `$2`：文件路径（当 $1 是模式时）

**使用方式：**
```
/prd-review <file.md>              # 全面审计
/prd-review logic <file.md>        # 仅逻辑分析
/prd-review structure <file.md>    # 仅结构分析
```

---

**执行指令：**

首先判断审计模式：
- 如果 `$1` 是 `logic` 或 `structure`，则模式为 `$1`，文件路径为 `$2`
- 否则模式为 `full`（全面审计），文件路径为 `$1`

然后执行：
1. 运行 `python3 ~/.config/opencode/skills/prd-review/scripts/analyze_prd_meta.py <文件路径>` 收集元数据
2. 读取 `~/.config/opencode/skills/prd-review/SKILL.md` 获取评审标准
3. 根据模式执行相应审计：

---

## 模式：full（全面审计）

执行完整流程：
- Phase 0: 熔断与红线检查
- Phase 1: 逻辑深度审计 (70%)
- Phase 2: 结构规范审计 (30%)
- 计算最终得分并输出完整报告

---

## 模式：logic（逻辑分析）

仅执行 Phase 1：
- A. 价值合理性 (40分) - 决策树检查
- B. MVP 纯度 (35分) - P0优先级验证
- C. 核心设计与可测试性 (25分)

输出格式：
```
### Phase 1: 逻辑深度审计

#### A. 价值合理性 (40分)
| 问题 | 证据提取 | 判定 | 扣分 |

#### B. MVP 纯度 (35分)
| P0 功能 | 正向定义 | 风险词 | 阻断性验证 | 判定 |

#### C. 核心设计与可测试性 (25分)
| 检查项 | 证据提取 | 判定 | 扣分 |

**逻辑分总计：** {L_Score}/100
```

---

## 模式：structure（结构分析）

仅执行 Phase 2：
- A. 必备项检查 (满分 100 分)
- B. 加分项检查 (每项 +5 分)

输出格式：
```
### Phase 2: 结构规范审计

#### A. 必备项 (满分 100 分)
| 检查项 | 分值 | 证据/脚本数据 | 得分 |
| 业务流程图 | 35 | ... | ... |
| 目标用户 | 25 | ... | ... |
| 数据埋点 | 20 | ... | ... |
| 异常流程 | 20 | ... | ... |

#### B. 加分项 (每项 +5 分)
| 检查项 | 分值 | 证据/脚本数据 | 得分 |

**结构分总计：** {S_Score}/100
```
